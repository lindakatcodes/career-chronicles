---
import RootLayout from "../layouts/RootLayout.astro";
import { supabase } from "../lib/supabase";

const {
  data: { user },
} = await supabase.auth.getUser();
let metadata = user?.user_metadata;
console.log({ metadata });

// will need an endpoint to update user profiles, can use this function to send the data (the email and password should be optional and those updates should be handled differently anyways)

// const { data, error } = await supabase.auth.updateUser({
//   email: "new@email.com",
//   password: "new-password",
//   data: { hello: 'world' }
// })
---

<RootLayout title="Profile">
  <h1>Profile</h1>
  <p>email: {metadata?.email || ""}</p>
  <p>display name: {metadata?.name || ""}</p>
  <form action="/api/auth/signout">
    <button type="submit">Sign out</button>
  </form>
</RootLayout>
